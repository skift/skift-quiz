function addChoices(e){if("undefined"!=typeof e&&"array"==$.type(e)){$(".choices-block").empty();for(var t=0;t<e.length;t++)$(document.createElement("li")).addClass("choice choice-box").attr("data-index",t).text(e[t]).appendTo(".choices-block")}}function endQuiz(){$(".question").empty(),$(".pager").empty(),$(".choices-block").empty(),$(".question-image").remove(),$("#submitbutton").remove(),$(".question").text("You got "+score+" out of "+quiz.content.length+" correct."),$(document.createElement("h2")).addClass("score").css({"text-align":"center","font-size":"7em"}).text(Math.round(score/quiz.content.length*100)+"%").insertAfter(".question"),$(".score").hide().fadeIn(1e3)}function htmlEncode(e){return $(document.createElement("div")).text(e).html()}function initialize(){"undefined"!=typeof quiz.title&&"string"==$.type(quiz.title)?$(document.createElement("h1")).text(quiz.title).appendTo(".quiz-frame"):$(document.createElement("h1")).text("Quiz").appendTo(".quiz-frame"),"undefined"!=typeof quiz&&"object"==$.type(quiz)&&($(document.createElement("p")).addClass("pager").text("Question 1 of "+quiz.content.length).appendTo(".quiz-frame"),$(document.createElement("p")).addClass("question").text(quiz.content[0].question).appendTo(".quiz-frame"),quiz.content[0].hasOwnProperty("image")&&""!=quiz.content[0].image&&$(document.createElement("img")).addClass("question-image").attr("src",quiz.content[0].image).appendTo(".quiz-frame").fadeIn(),$(document.createElement("ul")).addClass("choices-block").appendTo(".quiz-frame"),addChoices(quiz.content[0].choices),$(document.createElement("div")).addClass("submit").text("Submit Answer").appendTo(".quiz-frame"),$(document.createElement("a")).addClass("submit-button").attr("href","").appendTo(".submit"),setUpButtons(),$(".quiz-frame").hide().fadeIn(1e3),$(".explanation").hide().fadeIn(1e3))}function nextQuestion(e){$(".explanation").empty(),currentquestion++,lastquestion=currentquestion-1,lastquestion>=0&&($(".explanation").append('<br/><br/><h3 style="font-variant: small-caps; text-decoration: underline;">Your Last Answer<h3><br/>').append(quiz.content[lastquestion].question+"<br/><br/>"),quiz.content[lastquestion].choices[e]==quiz.content[lastquestion].correct?($(".explanation").append('<p style="color: green;"><strong>Correct!</strong></p> '+quiz.content[lastquestion].explanation),score++):$(".explanation").append('<p style="color: red"><strong>Incorrect.</strong></p> '+quiz.content[lastquestion].explanation),0==lastquestion?$(".quiz-frame").animate({left:"400px"},1e3):$(".explanation").hide().fadeIn(1e3)),submission=!0,void 0==quiz.content[currentquestion]?endQuiz():($(".question").text(quiz.content[currentquestion].question),$(".pager").text("Question "+Number(currentquestion+1)+" of "+quiz.content.length),quiz.content[currentquestion].hasOwnProperty("image")&&""!=quiz.content[currentquestion].image?0==$(".question-image").length?$(document.createElement("img")).addClass("question-image").attr("src",quiz.content[currentquestion].image).attr("alt",htmlEncode(quiz.content[currentquestion].question)):$(".question-image").attr("src",quiz.content[currentquestion].image).attr("alt",htmlEncode(quiz.content[currentquestion].question)):$(".question-image").remove(),addChoices(quiz.content[currentquestion].choices),setUpButtons())}function setUpButtons(){$(".choice").mouseover(function(){$(this).css({"background-color":"rgb(202, 202, 202)"})}),$(".choice").mouseout(function(){$(this).css({"background-color":"#FFE099;"})}),$(".choice").click(function(){var e=$(this).attr("data-index");$(".choice").removeAttr("style").off("mouseover mouseout"),$(this).css({"border-color":"#222","font-weight":700,"background-color":"rgb(250, 174, 0)"}),submission&&(submission=!1,$("#submitbutton").click(function(){$(".choice").off("click"),$(this).off("click"),nextQuestion(e)}))})}var quiz={},currentquestion=0,score=0,x=[],y=[],personality_score=[],submission=!0,picked,PersonalityQuiz={init:function(){"undefined"!=typeof quiz.title&&"string"==$.type(quiz.title)?$(document.createElement("p")).addClass("title").text(quiz.title).appendTo(".quiz-frame"):$(document.createElement("p")).addClass("title").text("Quiz").appendTo(".quiz-frame"),"undefined"!=typeof quiz.content&&"array"==$.type(quiz.content)&&($(document.createElement("p")).addClass("pager").text("Question 1 of "+quiz.content.length).appendTo(".quiz-frame"),$(document.createElement("p")).addClass("question").text(quiz.content[0].question).appendTo(".quiz-frame"),quiz.content[0].hasOwnProperty("image")&&""!=quiz.content[0].image&&$(document.createElement("img")).addClass("question-image").attr("src",quiz.content[0].image).appendTo(".quiz-frame"),$(document.createElement("ul")).addClass("choices-block").appendTo(".quiz-frame"),PersonalityQuiz.addChoices(quiz.content[0].choices),$(document.createElement("div")).addClass("submit-button").text("Submit Answer").appendTo(".quiz-frame"),PersonalityQuiz.setUpButtons())},addChoices:function(e){if($.each(e,function(e,t){x.push(e),y.push(t)}),"undefined"!=typeof x&&"array"==$.type(x)){$(".choices-block").empty();for(var t=0;t<x.length;t++)$(document.createElement("li")).addClass("choice").attr("data-index",t).text(x[t]).appendTo(".choices-block"),$(document.createElement("img")).addClass("picture").attr("src",y[t]).appendTo(".choices-block")}},setUpButtons:function(){$(".choice").click(function(){picked=$(this).attr("data-index"),$(".choice").removeAttr("style").off("mouseover mouseout"),$(this).css({"border-color":"#222","font-weight":700,"background-color":"rgb(250, 174, 0)"}),submission&&(submission=!1,$(".submit-button").click(function(){$(".choice").off("click"),$(this).off("click"),PersonalityQuiz.nextQuestion(picked)}))})},nextQuestion:function(e){currentquestion++,personality_score[e]++,submission=!0,y=[],void 0==quiz.content[currentquestion]?PersonalityQuiz.endTheQuiz():(x=[],$(".question").text(quiz.content[currentquestion].question),$(".pager").text("Question "+Number(currentquestion+1)+" of "+quiz.content.length),PersonalityQuiz.addChoices(quiz.content[currentquestion].choices),PersonalityQuiz.setUpButtons(),quiz.content[currentquestion].hasOwnProperty("image")&&""!=quiz.content[currentquestion].image?0==$(".question-image").length?$(document.createElement("img")).attr("id","question-image").addClass("question-image").attr("src",quiz.content[currentquestion].image).attr("alt",htmlEncode(quiz.content[currentquestion].question)):$(".question-image").attr("src",quiz.content[currentquestion].image).attr("alt",htmlEncode(quiz.content[currentquestion].question)):$(".question-image").remove())},endTheQuiz:function(){var e=personality_score.indexOf(Math.max.apply(Math,personality_score)),t=quiz.results[e];$(".question").empty(),$(".pager").empty(),$(".choices-block").empty(),$(".question-image").remove(),$(".submit-button").remove(),$(".question").attr("id","results").addClass("results").text("You got "+t+"!"),$("#results").hide().fadeIn(1e3)}};$(document).ready(function(){if(quiz=jQuery.parseJSON(jQuery(".skift-quiz .skift-quiz-object").text()),"trivia"==quiz.type)initialize();else if("personality"==quiz.type){for(i=0;i<quiz.results.length;i++)personality_score.push(0);PersonalityQuiz.init()}else console.log("Initializing conditional failed.")});